<div class="min-h-screen bg-slate-100">
  <!-- Sidebar -->
  <app-sidebar
    [navItems]="navItems"
    [isSidebarCollapsed]="isSidebarCollapsed"
    [isMobileSidebarOpen]="isMobileSidebarOpen"
    schoolName="Chrisland Int. School"
    schoolCampus="Main campus"
    userInitials="JD"
    userName="Patricia Onyema"
    userRole="Administrator"
    userEmail="patricia@schoolkit.com"
    (toggleSidebarCollapse)="toggleSidebarCollapse()"
    (closeMobileSidebar)="closeMobileSidebar()"
    (navigateToItem)="navigateToItem($event)"
    (logout)="logout()"
  ></app-sidebar>

  <!-- Main Content Area -->
  <div
    class="absolute inset-0 min-h-screen transition-all duration-300 lg:pl-6"
    [ngClass]="isSidebarCollapsed ? 'lg:ml-24' : 'lg:ml-72'"
  >
    <!-- Header -->
    <header
      class="sticky top-0 z-20 flex flex-col gap-4 bg-slate-100/95 px-4 py-3 backdrop-blur-lg lg:flex-row lg:items-center lg:justify-between lg:px-8 lg:py-3"
    >
      <div class="flex w-full items-center gap-3 lg:w-auto">
        <button
          type="button"
          class="flex h-11 w-11 items-center justify-center rounded-xl border border-slate-200 bg-white text-slate-600 transition hover:border-emerald-300 hover:text-emerald-500 lg:hidden"
          aria-label="Toggle navigation"
          (click)="toggleMobileSidebar()"
        >
          <svg class="h-5 w-5" viewBox="0 0 24 24" fill="none" stroke="currentColor">
            <path
              stroke-linecap="round"
              stroke-linejoin="round"
              stroke-width="1.8"
              d="M4 6h16M4 12h16M4 18h16"
            />
          </svg>
        </button>
        <div class="relative flex-1 lg:w-96">
          <svg
            class="absolute left-3 top-1/2 h-5 w-5 -translate-y-1/2 text-slate-400"
            viewBox="0 0 24 24"
            fill="none"
            stroke="currentColor"
          >
            <path
              stroke-linecap="round"
              stroke-linejoin="round"
              stroke-width="1.6"
              d="M11 19a8 8 0 100-16 8 8 0 000 16zm10 2l-3.35-3.35"
            />
          </svg>
          <input
            type="search"
            placeholder="Search students, assignments, fees..."
            class="w-full rounded-2xl border border-slate-200 bg-white py-3 pl-10 pr-4 text-sm text-slate-700 shadow-sm shadow-emerald-900/5 outline-none transition focus:border-emerald-400 focus:shadow-lg focus:shadow-emerald-900/10"
          />
        </div>
      </div>

      <div class="flex w-full items-center justify-between gap-3 lg:w-auto">
        <div class="flex items-center gap-3">
          <button
            type="button"
            class="flex h-11 w-11 items-center justify-center rounded-xl border border-slate-200 bg-white text-slate-600 transition hover:border-emerald-300 hover:text-emerald-500"
            aria-label="Help center"
          >
            <svg class="h-5 w-5" viewBox="0 0 24 24" fill="none" stroke="currentColor">
              <path
                stroke-linecap="round"
                stroke-linejoin="round"
                stroke-width="1.6"
                d="M12 2a10 10 0 100 20 10 10 0 000-20zm0 12h.01M12 8a2 2 0 01.35 3.97l-.35.03"
              />
            </svg>
          </button>
          <button
            type="button"
            class="relative flex h-11 w-11 items-center justify-center rounded-xl border border-slate-200 bg-white text-slate-600 transition hover:border-emerald-300 hover:text-emerald-500"
            aria-label="Notifications"
          >
            <span class="absolute right-2 top-2 h-2.5 w-2.5 rounded-full bg-emerald-400"></span>
            <svg class="h-5 w-5" viewBox="0 0 24 24" fill="none" stroke="currentColor">
              <path
                stroke-linecap="round"
                stroke-linejoin="round"
                stroke-width="1.6"
                d="M15 17h5l-1.405-1.405A2.032 2.032 0 0118 14.158V11a6 6 0 10-12 0v3.159c0 .538-.214 1.055-.595 1.436L4 17h5m3 5a3 3 0 003-3H9a3 3 0 003 3z"
              />
            </svg>
          </button>
          <button
            type="button"
            class="hidden h-11 w-11 items-center justify-center rounded-xl border border-slate-200 bg-white text-slate-600 transition hover:border-emerald-300 hover:text-emerald-500 lg:flex"
            aria-label="Collapse sidebar"
            (click)="toggleSidebarCollapse()"
          >
            <svg
              *ngIf="!isSidebarCollapsed"
              class="h-5 w-5"
              viewBox="0 0 24 24"
              fill="none"
              stroke="currentColor"
            >
              <path
                stroke-linecap="round"
                stroke-linejoin="round"
                stroke-width="1.6"
                d="M15 19l-7-7 7-7"
              />
            </svg>
            <svg
              *ngIf="isSidebarCollapsed"
              class="h-5 w-5"
              viewBox="0 0 24 24"
              fill="none"
              stroke="currentColor"
            >
              <path
                stroke-linecap="round"
                stroke-linejoin="round"
                stroke-width="1.6"
                d="M9 5l7 7-7 7"
              />
            </svg>
          </button>
        </div>
        <div class="relative">
          <button
            type="button"
            class="flex items-center gap-3 rounded-2xl bg-white px-3 py-2 text-left shadow-sm shadow-emerald-900/5 transition hover:shadow-md"
            (click)="toggleUserMenu($event)"
            aria-haspopup="menu"
            [attr.aria-expanded]="isUserMenuOpen"
          >
            <div
              class="flex h-11 w-11 items-center justify-center rounded-xl bg-gradient-to-br from-emerald-500 to-teal-500 text-white font-semibold"
            >
              P
            </div>
            <div class="hidden min-w-[140px] flex-1 flex-col text-sm text-slate-600 sm:flex">
              <span class="font-semibold text-slate-800">Patricia Onyema</span>
              <span class="text-xs text-slate-500">Administrator</span>
            </div>
            <svg
              class="hidden h-4 w-4 text-slate-400 transition sm:block"
              [ngClass]="{ 'rotate-180': isUserMenuOpen }"
              viewBox="0 0 24 24"
              fill="none"
              stroke="currentColor"
            >
              <path
                stroke-linecap="round"
                stroke-linejoin="round"
                stroke-width="1.6"
                d="M6 9l6 6 6-6"
              />
            </svg>
          </button>
        </div>
      </div>
    </header>

    <!-- Main Content -->
    <main class="px-4 py-6 lg:px-8" *ngIf="student">
      <!-- Breadcrumb -->
      <nav class="mb-6 flex items-center gap-2 text-sm text-slate-600">
        <button type="button" class="hover:text-emerald-600 transition-colors" (click)="goBack()">
          Student Management
        </button>
        <svg class="h-4 w-4" viewBox="0 0 24 24" fill="none" stroke="currentColor">
          <path
            stroke-linecap="round"
            stroke-linejoin="round"
            stroke-width="1.6"
            d="M9 5l7 7-7 7"
          />
        </svg>
        <span class="text-slate-900 font-medium"
          >{{ student.firstName }} {{ student.lastName }}</span
        >
      </nav>

      <!-- Page Header with Back Button -->
      <div class="mb-8 flex flex-col gap-4 lg:flex-row lg:items-center lg:justify-between">
        <div class="flex items-center gap-4">
          <button
            type="button"
            class="flex h-12 w-12 items-center justify-center rounded-xl border border-slate-200 bg-white text-slate-600 transition hover:border-emerald-300 hover:text-emerald-500"
            (click)="goBack()"
          >
            <svg class="h-5 w-5" viewBox="0 0 24 24" fill="none" stroke="currentColor">
              <path
                stroke-linecap="round"
                stroke-linejoin="round"
                stroke-width="1.8"
                d="M15 19l-7-7 7-7"
              />
            </svg>
          </button>
          <div>
            <h1 class="text-3xl font-bold text-slate-900">
              {{ student.firstName }} {{ student.lastName }}
            </h1>
            <p class="text-slate-600 mt-1">{{ student.regNo }} â€¢ {{ classInfo?.className }}</p>
          </div>
        </div>
        <div class="flex items-center gap-3">
          <button
            type="button"
            class="inline-flex items-center gap-2 rounded-xl border border-slate-200 bg-white px-4 py-2.5 text-sm font-medium text-slate-700 transition hover:border-emerald-300 hover:text-emerald-600"
          >
            <svg class="h-4 w-4" viewBox="0 0 24 24" fill="none" stroke="currentColor">
              <path
                stroke-linecap="round"
                stroke-linejoin="round"
                stroke-width="1.8"
                d="M17 17h2a2 2 0 002-2v-4a2 2 0 00-2-2H5a2 2 0 00-2 2v4a2 2 0 002 2h2m2 4h6a2 2 0 002-2v-4a2 2 0 00-2-2H9a2 2 0 00-2 2v4a2 2 0 002 2zm8-12V5a2 2 0 00-2-2H9a2 2 0 00-2 2v4h10z"
              />
            </svg>
            Print Report
          </button>
          <button
            type="button"
            class="primary-button inline-flex items-center gap-2"
            (click)="editStudent()"
          >
            <svg class="h-4 w-4" viewBox="0 0 24 24" fill="none" stroke="currentColor">
              <path
                stroke-linecap="round"
                stroke-linejoin="round"
                stroke-width="1.8"
                d="M11 4H4a2 2 0 00-2 2v14a2 2 0 002 2h14a2 2 0 002-2v-7"
              />
              <path
                stroke-linecap="round"
                stroke-linejoin="round"
                stroke-width="1.8"
                d="M18.5 2.5a2.121 2.121 0 013 3L12 15l-4 1 1-4 9.5-9.5z"
              />
            </svg>
            Edit Student
          </button>
        </div>
      </div>

      <!-- Student Overview Cards -->
      <div class="mb-8 grid gap-5 sm:grid-cols-2 lg:grid-cols-4">
        <!-- Total Assignments Card -->
        <article
          class="rounded-2xl border border-white/70 bg-white/90 p-6 shadow-xl shadow-emerald-900/5"
        >
          <div class="flex items-center justify-between">
            <span class="text-xs font-medium uppercase tracking-[0.2em] text-slate-500"
              >Total Assignments</span
            >
            <div
              class="flex h-12 w-12 items-center justify-center rounded-xl bg-blue-100 text-blue-600"
            >
              <svg class="h-6 w-6" viewBox="0 0 24 24" fill="none" stroke="currentColor">
                <path
                  stroke-linecap="round"
                  stroke-linejoin="round"
                  stroke-width="1.6"
                  d="M9 12h6m-6 4h6m2 5H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z"
                />
              </svg>
            </div>
          </div>
          <p class="mt-3 text-3xl font-bold text-slate-900">{{ getAssignmentStats().total }}</p>
          <p class="mt-1 text-sm text-slate-600">{{ getAssignmentStats().graded }} completed</p>
        </article>

        <!-- Pending Assignments Card -->
        <article
          class="rounded-2xl border border-white/70 bg-white/90 p-6 shadow-xl shadow-emerald-900/5"
        >
          <div class="flex items-center justify-between">
            <span class="text-xs font-medium uppercase tracking-[0.2em] text-slate-500"
              >Pending</span
            >
            <div
              class="flex h-12 w-12 items-center justify-center rounded-xl bg-yellow-100 text-yellow-600"
            >
              <svg class="h-6 w-6" viewBox="0 0 24 24" fill="none" stroke="currentColor">
                <circle cx="12" cy="12" r="10" stroke-width="1.6" />
                <polyline points="12,6 12,12 16,14" stroke-width="1.6" />
              </svg>
            </div>
          </div>
          <p class="mt-3 text-3xl font-bold text-slate-900">{{ getAssignmentStats().pending }}</p>
          <p class="mt-1 text-sm text-slate-600">assignments due</p>
        </article>

        <!-- Total Fees Card -->
        <article
          class="rounded-2xl border border-white/70 bg-white/90 p-6 shadow-xl shadow-emerald-900/5"
        >
          <div class="flex items-center justify-between">
            <span class="text-xs font-medium uppercase tracking-[0.2em] text-slate-500"
              >Total Fees</span
            >
            <div
              class="flex h-12 w-12 items-center justify-center rounded-xl bg-emerald-100 text-emerald-600"
            >
              <svg class="h-6 w-6" viewBox="0 0 24 24" fill="none" stroke="currentColor">
                <path
                  stroke-linecap="round"
                  stroke-linejoin="round"
                  stroke-width="1.6"
                  d="M12 8c-1.657 0-3 .895-3 2s1.343 2 3 2 3 .895 3 2-1.343 2-3 2m0-8c1.11 0 2.08.402 2.599 1M12 8V7m0 1v8m0 0v1m0-1c-1.11 0-2.08-.402-2.599-1"
                />
              </svg>
            </div>
          </div>
          <p class="mt-3 text-3xl font-bold text-slate-900">{{ formatCurrency(getTotalFees()) }}</p>
          <p class="mt-1 text-sm text-slate-600">{{ formatCurrency(getPaidFees()) }} paid</p>
        </article>

        <!-- Outstanding Fees Card -->
        <article
          class="rounded-2xl border border-white/70 bg-white/90 p-6 shadow-xl shadow-emerald-900/5"
        >
          <div class="flex items-center justify-between">
            <span class="text-xs font-medium uppercase tracking-[0.2em] text-slate-500"
              >Outstanding</span
            >
            <div
              class="flex h-12 w-12 items-center justify-center rounded-xl bg-red-100 text-red-600"
            >
              <svg class="h-6 w-6" viewBox="0 0 24 24" fill="none" stroke="currentColor">
                <path
                  stroke-linecap="round"
                  stroke-linejoin="round"
                  stroke-width="1.6"
                  d="M12 9v3.75m-9.303 3.376c-.866 1.5.217 3.374 1.948 3.374h14.71c1.73 0 2.813-1.874 1.948-3.374L13.949 3.378c-.866-1.5-3.032-1.5-3.898 0L2.697 16.126zM12 15.75h.007v.008H12v-.008z"
                />
              </svg>
            </div>
          </div>
          <p class="mt-3 text-3xl font-bold text-slate-900">
            {{ formatCurrency(getPendingFees()) }}
          </p>
          <p class="mt-1 text-sm text-slate-600">requires payment</p>
        </article>
      </div>

      <!-- Student Profile Section -->
      <div
        class="mb-8 rounded-3xl border border-white/70 bg-white/90 p-6 shadow-xl shadow-emerald-900/5"
      >
        <div class="flex flex-col lg:flex-row lg:items-start lg:gap-8">
          <!-- Student Avatar & Basic Info -->
          <div class="flex items-center gap-6 mb-6 lg:mb-0">
            <div
              class="flex h-24 w-24 items-center justify-center rounded-2xl bg-gradient-to-br from-emerald-500 to-teal-500 text-white font-bold text-2xl"
            >
              {{ getStudentInitials(student.firstName + ' ' + student.lastName) }}
            </div>
            <div>
              <h2 class="text-xl font-semibold text-slate-900">
                {{ student.firstName }} {{ student.middleName }} {{ student.lastName }}
              </h2>
              <p class="text-emerald-600 font-medium">{{ student.regNo }}</p>
              <p class="text-slate-600 text-sm">{{ student.email }}</p>
              <div class="flex items-center gap-2 mt-2">
                <span
                  [ngClass]="
                    student.status === 'Active'
                      ? 'bg-green-100 text-green-800'
                      : 'bg-red-100 text-red-800'
                  "
                  class="px-2 py-1 text-xs font-medium rounded-full"
                >
                  {{ student.status }}
                </span>
                <span class="text-slate-500 text-sm">â€¢ {{ student.gender }}</span>
              </div>
            </div>
          </div>

          <!-- Quick Stats -->
          <div class="flex-1 grid grid-cols-2 lg:grid-cols-4 gap-4">
            <div class="text-center p-4 bg-blue-50 rounded-xl">
              <p class="text-2xl font-bold text-blue-600">{{ getAssignmentStats().total }}</p>
              <p class="text-sm text-blue-800">Total Assignments</p>
            </div>
            <div class="text-center p-4 bg-green-50 rounded-xl">
              <p class="text-2xl font-bold text-green-600">{{ getAssignmentStats().graded }}</p>
              <p class="text-sm text-green-800">Completed</p>
            </div>
            <div class="text-center p-4 bg-yellow-50 rounded-xl">
              <p class="text-2xl font-bold text-yellow-600">{{ getAssignmentStats().pending }}</p>
              <p class="text-sm text-yellow-800">Pending</p>
            </div>
            <div class="text-center p-4 bg-purple-50 rounded-xl">
              <p class="text-xl font-bold text-purple-600">
                {{ formatCurrency(getPendingFees()) }}
              </p>
              <p class="text-sm text-purple-800">Pending Fees</p>
            </div>
          </div>
        </div>
      </div>

      <!-- Navigation Tabs -->
      <div
        class="mb-6 rounded-3xl border border-white/70 bg-white/90 p-4 shadow-xl shadow-emerald-900/5"
      >
        <div class="flex space-x-1 rounded-2xl bg-slate-100 p-1">
          <button
            type="button"
            class="flex-1 rounded-xl px-4 py-2.5 text-sm font-medium transition focus:outline-none"
            [ngClass]="{
              'bg-white text-emerald-600 shadow-sm': activeTab === 'overview',
              'text-slate-600 hover:text-slate-900': activeTab !== 'overview'
            }"
            (click)="switchTab('overview')"
          >
            Overview
          </button>
          <button
            type="button"
            class="flex-1 rounded-xl px-4 py-2.5 text-sm font-medium transition focus:outline-none"
            [ngClass]="{
              'bg-white text-emerald-600 shadow-sm': activeTab === 'assignments',
              'text-slate-600 hover:text-slate-900': activeTab !== 'assignments'
            }"
            (click)="switchTab('assignments')"
          >
            Assignments ({{ assignments.length }})
          </button>
          <button
            type="button"
            class="flex-1 rounded-xl px-4 py-2.5 text-sm font-medium transition focus:outline-none"
            [ngClass]="{
              'bg-white text-emerald-600 shadow-sm': activeTab === 'fees',
              'text-slate-600 hover:text-slate-900': activeTab !== 'fees'
            }"
            (click)="switchTab('fees')"
          >
            Fees ({{ fees.length }})
          </button>
          <button
            type="button"
            class="flex-1 rounded-xl px-4 py-2.5 text-sm font-medium transition focus:outline-none"
            [ngClass]="{
              'bg-white text-emerald-600 shadow-sm': activeTab === 'parents',
              'text-slate-600 hover:text-slate-900': activeTab !== 'parents'
            }"
            (click)="switchTab('parents')"
          >
            Parents ({{ parents.length }})
          </button>
        </div>
      </div>
      <!-- Tab Content -->

      <!-- Overview Tab -->
      <div *ngIf="activeTab === 'overview'" class="space-y-6">
        <div class="grid grid-cols-1 lg:grid-cols-2 gap-6">
          <!-- Personal Information -->
          <div
            class="rounded-3xl border border-white/70 bg-white/90 p-6 shadow-xl shadow-emerald-900/5"
          >
            <h3 class="text-lg font-semibold text-slate-900 mb-4 flex items-center gap-2">
              <svg
                class="h-5 w-5 text-emerald-600"
                viewBox="0 0 24 24"
                fill="none"
                stroke="currentColor"
              >
                <path
                  stroke-linecap="round"
                  stroke-linejoin="round"
                  stroke-width="2"
                  d="M16 7a4 4 0 11-8 0 4 4 0 018 0zM12 14a7 7 0 00-7 7h14a7 7 0 00-7-7z"
                />
              </svg>
              Personal Information
            </h3>
            <div class="space-y-3">
              <div class="flex justify-between">
                <span class="text-sm font-medium text-gray-500">Date of Birth:</span>
                <span class="text-sm text-gray-900">{{
                  student.dateOfBirth | date : 'mediumDate'
                }}</span>
              </div>
              <div class="flex justify-between">
                <span class="text-sm font-medium text-gray-500">Gender:</span>
                <span class="text-sm text-gray-900">{{ student.gender }}</span>
              </div>
              <div class="flex justify-between">
                <span class="text-sm font-medium text-gray-500">Email:</span>
                <span class="text-sm text-gray-900">{{ student.email }}</span>
              </div>
              <div class="flex justify-between">
                <span class="text-sm font-medium text-gray-500">Enrollment Date:</span>
                <span class="text-sm text-gray-900">{{
                  student.enrollmentDate | date : 'mediumDate'
                }}</span>
              </div>
              <div class="pt-3 border-t">
                <span class="text-sm font-medium text-gray-500">Address:</span>
                <p class="text-sm text-gray-900 mt-1">{{ student.address }}</p>
                <p class="text-sm text-gray-900">{{ student.state }}, {{ student.country }}</p>
              </div>
            </div>
          </div>

          <!-- Academic Information -->
          <div
            class="rounded-3xl border border-white/70 bg-white/90 p-6 shadow-xl shadow-emerald-900/5"
          >
            <h3 class="text-lg font-semibold text-slate-900 mb-4 flex items-center gap-2">
              <svg
                class="h-5 w-5 text-blue-600"
                viewBox="0 0 24 24"
                fill="none"
                stroke="currentColor"
              >
                <path
                  stroke-linecap="round"
                  stroke-linejoin="round"
                  stroke-width="2"
                  d="M12 14l9-5-9-5-9 5 9 5z"
                />
                <path
                  stroke-linecap="round"
                  stroke-linejoin="round"
                  stroke-width="2"
                  d="M12 14l6.16-3.422a12.083 12.083 0 01.665 6.479A11.952 11.952 0 0012 20.055a11.952 11.952 0 00-6.824-2.998 12.078 12.078 0 01.665-6.479L12 14z"
                />
              </svg>
              Academic Information
            </h3>
            <div class="space-y-3">
              <div class="flex justify-between">
                <span class="text-sm font-medium text-gray-500">Class:</span>
                <span class="text-sm font-semibold text-blue-700">{{ classInfo?.className }}</span>
              </div>
              <div class="flex justify-between">
                <span class="text-sm font-medium text-gray-500">Form Teacher:</span>
                <span class="text-sm text-gray-900">{{ classInfo?.formTeacher }}</span>
              </div>
              <div class="pt-3 border-t">
                <span class="text-sm font-medium text-gray-500 mb-2 block">Subjects:</span>
                <div class="flex flex-wrap gap-2">
                  <span
                    *ngFor="let subject of classInfo?.subjects"
                    class="px-2 py-1 bg-blue-100 text-blue-800 text-xs font-medium rounded-full"
                  >
                    {{ subject }}
                  </span>
                </div>
              </div>
            </div>
          </div>
        </div>
      </div>

      <!-- Assignments Tab -->
      <div *ngIf="activeTab === 'assignments'" class="space-y-6">
        <div
          class="rounded-3xl border border-white/70 bg-white/90 p-6 shadow-xl shadow-emerald-900/5"
        >
          <h3 class="text-lg font-semibold text-slate-900 mb-6">Recent Assignments</h3>
          <div class="space-y-4">
            <div
              *ngFor="let assignment of assignments"
              class="border border-slate-200 rounded-xl p-4 hover:border-emerald-300 transition-colors"
            >
              <div class="flex items-start justify-between">
                <div class="flex-1">
                  <div class="flex items-center gap-3 mb-2">
                    <h4 class="font-semibold text-slate-900">{{ assignment.title }}</h4>
                    <span
                      class="text-xs font-medium px-2 py-1 rounded-full"
                      [ngClass]="getStatusColor(assignment.status)"
                    >
                      {{ assignment.status }}
                    </span>
                  </div>
                  <p class="text-sm text-slate-600 mb-2">{{ assignment.description }}</p>
                  <div class="flex items-center gap-4 text-sm text-slate-500">
                    <span class="flex items-center gap-1">
                      <svg class="h-4 w-4" viewBox="0 0 24 24" fill="none" stroke="currentColor">
                        <path
                          stroke-linecap="round"
                          stroke-linejoin="round"
                          stroke-width="2"
                          d="M12 6.253v13m0-13C10.832 5.477 9.246 5 7.5 5S4.168 5.477 3 6.253v13C4.168 18.477 5.754 18 7.5 18s3.332.477 4.5 1.253m0-13C13.168 5.477 14.754 5 16.5 5c1.746 0 3.332.477 4.5 1.253v13C19.832 18.477 18.246 18 16.5 18c-1.746 0-3.332.477-4.5 1.253"
                        />
                      </svg>
                      {{ assignment.subject }}
                    </span>
                    <span class="flex items-center gap-1">
                      <svg class="h-4 w-4" viewBox="0 0 24 24" fill="none" stroke="currentColor">
                        <path
                          stroke-linecap="round"
                          stroke-linejoin="round"
                          stroke-width="2"
                          d="M8 7V3m8 4V3m-9 8h10M5 21h14a2 2 0 002-2V7a2 2 0 00-2-2H5a2 2 0 00-2 2v12a2 2 0 002 2z"
                        />
                      </svg>
                      Due: {{ assignment.dueDate | date : 'mediumDate' }}
                    </span>
                  </div>
                </div>
                <div class="text-right">
                  <div
                    *ngIf="assignment.score !== undefined"
                    class="text-lg font-bold text-emerald-600"
                  >
                    {{ assignment.score }}/{{ assignment.maxScore }}
                  </div>
                  <div class="text-sm text-slate-500">Max: {{ assignment.maxScore }} points</div>
                  <div *ngIf="assignment.submissionDate" class="text-xs text-slate-400 mt-1">
                    Submitted: {{ assignment.submissionDate | date : 'short' }}
                  </div>
                </div>
              </div>
            </div>

            <div *ngIf="assignments.length === 0" class="text-center py-8">
              <div
                class="rounded-full bg-slate-100 p-3 mx-auto mb-4 w-16 h-16 flex items-center justify-center"
              >
                <svg
                  class="h-8 w-8 text-slate-400"
                  viewBox="0 0 24 24"
                  fill="none"
                  stroke="currentColor"
                >
                  <path
                    stroke-linecap="round"
                    stroke-linejoin="round"
                    stroke-width="2"
                    d="M9 12h6m-6 4h6m2 5H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z"
                  />
                </svg>
              </div>
              <p class="text-slate-500 text-sm">No assignments found</p>
            </div>
          </div>
        </div>
      </div>

      <!-- Fees Tab -->
      <div *ngIf="activeTab === 'fees'" class="space-y-6">
        <div
          class="rounded-3xl border border-white/70 bg-white/90 p-6 shadow-xl shadow-emerald-900/5"
        >
          <h3 class="text-lg font-semibold text-slate-900 mb-6">Fee Breakdown</h3>
          <div class="overflow-x-auto">
            <table class="w-full">
              <thead>
                <tr class="border-b border-slate-200">
                  <th class="text-left py-3 px-4 font-medium text-slate-600">Description</th>
                  <th class="text-left py-3 px-4 font-medium text-slate-600">Amount</th>
                  <th class="text-left py-3 px-4 font-medium text-slate-600">Due Date</th>
                  <th class="text-left py-3 px-4 font-medium text-slate-600">Status</th>
                  <th class="text-left py-3 px-4 font-medium text-slate-600">Paid Date</th>
                </tr>
              </thead>
              <tbody>
                <tr *ngFor="let fee of fees" class="border-b border-slate-100 hover:bg-slate-50">
                  <td class="py-4 px-4">
                    <div>
                      <p class="font-medium text-slate-900">{{ fee.description }}</p>
                      <p class="text-sm text-slate-500">{{ fee.term }} â€¢ {{ fee.session }}</p>
                    </div>
                  </td>
                  <td class="py-4 px-4 font-semibold text-slate-900">
                    {{ formatCurrency(fee.amount) }}
                  </td>
                  <td class="py-4 px-4 text-slate-600">{{ fee.dueDate | date : 'mediumDate' }}</td>
                  <td class="py-4 px-4">
                    <span
                      class="text-xs font-medium px-2 py-1 rounded-full"
                      [ngClass]="getStatusColor(fee.status)"
                    >
                      {{ fee.status }}
                    </span>
                  </td>
                  <td class="py-4 px-4 text-slate-600">
                    <span *ngIf="fee.paidDate; else notPaid">{{
                      fee.paidDate | date : 'mediumDate'
                    }}</span>
                    <ng-template #notPaid>-</ng-template>
                  </td>
                </tr>
              </tbody>
            </table>

            <div *ngIf="fees.length === 0" class="text-center py-8">
              <div
                class="rounded-full bg-slate-100 p-3 mx-auto mb-4 w-16 h-16 flex items-center justify-center"
              >
                <svg
                  class="h-8 w-8 text-slate-400"
                  viewBox="0 0 24 24"
                  fill="none"
                  stroke="currentColor"
                >
                  <path
                    stroke-linecap="round"
                    stroke-linejoin="round"
                    stroke-width="2"
                    d="M3 10h18M7 15h1m4 0h1m-7 4h12a3 3 0 003-3V8a3 3 0 00-3-3H6a3 3 0 00-3 3v8a3 3 0 003 3z"
                  />
                </svg>
              </div>
              <p class="text-slate-500 text-sm">No fees found</p>
            </div>
          </div>
        </div>
      </div>

      <!-- Parents Tab -->
      <div *ngIf="activeTab === 'parents'" class="space-y-6">
        <div
          class="rounded-3xl border border-white/70 bg-white/90 p-6 shadow-xl shadow-emerald-900/5"
        >
          <h3 class="text-lg font-semibold text-slate-900 mb-6 flex items-center gap-2">
            <svg
              class="h-5 w-5 text-purple-600"
              viewBox="0 0 24 24"
              fill="none"
              stroke="currentColor"
            >
              <path
                stroke-linecap="round"
                stroke-linejoin="round"
                stroke-width="2"
                d="M12 4.354a4 4 0 110 5.292M15 21H3v-1a6 6 0 0112 0v1zm0 0h6v-1a6 6 0 00-9-5.197m13.5-9a2.5 2.5 0 11-5 0 2.5 2.5 0 015 0z"
              />
            </svg>
            Parent/Guardian Information
          </h3>
          <div *ngIf="parents.length > 0; else noParents">
            <div class="grid grid-cols-1 md:grid-cols-2 gap-6">
              <div
                *ngFor="let parent of parents"
                class="border border-purple-200 rounded-xl p-6 hover:border-purple-300 transition-colors"
              >
                <div class="flex items-start gap-4">
                  <div
                    class="flex h-12 w-12 items-center justify-center rounded-xl bg-purple-100 text-purple-600 font-semibold"
                  >
                    {{ getStudentInitials(parent.firstName + ' ' + parent.lastName) }}
                  </div>
                  <div class="flex-1">
                    <h4 class="font-semibold text-slate-900 mb-1">
                      {{ parent.firstName }} {{ parent.lastName }}
                    </h4>
                    <p class="text-sm text-purple-600 font-medium mb-3">
                      {{ parent.relationship }}
                    </p>
                    <div class="space-y-2 text-sm text-slate-600">
                      <div class="flex items-center gap-2">
                        <svg class="h-4 w-4" viewBox="0 0 24 24" fill="none" stroke="currentColor">
                          <path
                            stroke-linecap="round"
                            stroke-linejoin="round"
                            stroke-width="2"
                            d="M3 8l7.89 5.26a2 2 0 002.22 0L21 8M5 19h14a2 2 0 002-2V7a2 2 0 00-2-2H5a2 2 0 00-2 2v10a2 2 0 002 2z"
                          />
                        </svg>
                        {{ parent.email }}
                      </div>
                      <div class="flex items-center gap-2">
                        <svg class="h-4 w-4" viewBox="0 0 24 24" fill="none" stroke="currentColor">
                          <path
                            stroke-linecap="round"
                            stroke-linejoin="round"
                            stroke-width="2"
                            d="M3 5a2 2 0 012-2h3.28a1 1 0 01.948.684l1.498 4.493a1 1 0 01-.502 1.21l-2.257 1.13a11.042 11.042 0 005.516 5.516l1.13-2.257a1 1 0 011.21-.502l4.493 1.498a1 1 0 01.684.949V19a2 2 0 01-2 2h-1C9.716 21 3 14.284 3 6V5z"
                          />
                        </svg>
                        {{ parent.phone }}
                      </div>
                      <div class="flex items-center gap-2">
                        <svg class="h-4 w-4" viewBox="0 0 24 24" fill="none" stroke="currentColor">
                          <path
                            stroke-linecap="round"
                            stroke-linejoin="round"
                            stroke-width="2"
                            d="M21 13.255A23.931 23.931 0 0112 15c-3.183 0-6.22-.62-9-1.745M16 6V4a2 2 0 00-2-2h-4a2 2 0 00-2-2v2m8 0V6a2 2 0 012 2v6a2 2 0 01-2 2H6a2 2 0 01-2-2V8a2 2 0 012-2V6"
                          />
                        </svg>
                        {{ parent.occupation }}
                      </div>
                    </div>
                    <div class="mt-4 pt-3 border-t border-slate-100">
                      <p class="text-sm text-slate-600">{{ parent.address }}</p>
                    </div>
                  </div>
                </div>
              </div>
            </div>
          </div>
          <ng-template #noParents>
            <div class="text-center py-8">
              <div
                class="rounded-full bg-slate-100 p-3 mx-auto mb-4 w-16 h-16 flex items-center justify-center"
              >
                <svg
                  class="h-8 w-8 text-slate-400"
                  viewBox="0 0 24 24"
                  fill="none"
                  stroke="currentColor"
                >
                  <path
                    stroke-linecap="round"
                    stroke-linejoin="round"
                    stroke-width="2"
                    d="M12 4.354a4 4 0 110 5.292M15 21H3v-1a6 6 0 0112 0v1zm0 0h6v-1a6 6 0 00-9-5.197m13.5-9a2.5 2.5 0 11-5 0 2.5 2.5 0 015 0z"
                  />
                </svg>
              </div>
              <p class="text-slate-500 text-sm">No parent information found</p>
            </div>
          </ng-template>
        </div>
      </div>
    </main>
  </div>
</div>

<!-- Loading State -->
<div *ngIf="!student" class="min-h-screen bg-slate-100 flex items-center justify-center">
  <div class="text-center">
    <div
      class="animate-spin rounded-full h-12 w-12 border-b-2 border-emerald-600 mx-auto mb-4"
    ></div>
    <p class="text-slate-600">Loading student details...</p>
  </div>
</div>
